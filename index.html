<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Gest√£o Escrit√≥rio Advocacia</title>
    <link rel="stylesheet" href="css/style.css">
    <script type="module" src="./dist/main.js" defer></script>
</head>
<body>
    <header>
        <h1><i class="icon">‚öñÔ∏è</i> Escrit√≥rio Advocacia: Colaboradores & Tarefas</h1>
        <div id="contadores-stats">
            <div id="counters-left">
                <div class="toggle-views">
                    <button id="btnViewUsers" class="toggle-btn toggle-btn-active" title="Visualizar Utilizadores">üë§ Utilizadores</button>
                    <button id="btnViewTasks" class="toggle-btn" title="Visualizar Tarefas">üìã Tarefas</button>
                </div>
                <button id="btnSystemInfo" class="btn-system-info" title="Informa√ß√µes do Sistema">‚ÑπÔ∏è Sistema</button>
                <button id="btnViewLogs" class="btn-system-info" title="Visualizar Logs">üìã Logs</button>
            </div>
            
            <div id="counters-right">
                <div id="stats-dashboard" class="counter-group right"></div>
            </div>
        </div>
    </header>

    <main class="dashboard-container">
        <section id="col-users" class="column">
            <div class="section-header">
                <h2><i class="icon">üë§</i> Gest√£o de Utilizadores</h2>
                <div id="users-stats-inline" class="inline-stats"></div>
            </div>
            
            <form id="formAdd" class="form-panel" novalidate>
                <div class="input-group">
                    <input id="name" type="text" class="boxEnter" placeholder="Nome do Utilizador">
                    <input id="email" type="email" class="boxEnter" placeholder="E-mail">
                    
                    <select id="role" class="boxEnter">
                        <option value="" disabled selected>Selecionar Fun√ß√£o</option>
                        <option value="ADMIN">Administrador (Total)</option>
                        <option value="MANAGER">Gestor (Edi√ß√£o)</option>
                        <option value="MEMBER">Membro (Tarefas)</option>
                        <option value="VIEWER">Visualizador (Leitura)</option>
                    </select>

                    <button id="add" type="submit">Adicionar</button>
                </div>
                <span id="erro"></span>
            </form>

            <div class="search-filters">
                <input type="text" id="searchInput" placeholder="Pesquisar utilizador..." class="boxEnter">
                <div class="btn-group-mini">
                    <button id="filterActive">Ativos</button>
                    <button id="showAll">Todos</button>
                    <button id="sortName">Nome A-Z</button>
                </div>
            </div>

            <section id="users">
                <ul id="usersList" class="user-container"></ul>
            </section>
        </section>

        <section id="col-tasks" class="column active-column">
            <div class="section-header section-header-tasks-global">
                <h2><i class="icon">üìã</i> Gest√£o de Tarefas</h2>
                <div id="tasks-stats-global" class="inline-stats"></div>
            </div>

            <section id="global-search-panel" class="inline-filter-relocated">
                <label>Filtrar:</label>
                <div class="filter-field">
                    <input type="text" id="search-title" placeholder="T√≠tulo...">
                    <select id="search-user">
                        <option value="">Usu√°rio</option>
                    </select>
                    <select id="search-status">
                        <option value="">Status</option>
                        <option value="Aberta">Aberta</option>
                        <option value="Conclu√≠da">Conclu√≠da</option>
                    </select>
                </div>
            </section>

            <div class="user-selected-header">
                <div class="user-selected-info">
                    <h3>
                        <span class="user-icon">üë§</span>
                        <span id="selectedUserName">Nenhum utilizador selecionado</span>
                    </h3>
                    <small>ID: <span id="selectedUserIdDisplay">-</span></small>
                </div>
                <div id="tasks-stats-user" class="inline-stats inline-stats-user"></div>
            </div>

            <div id="problem" class="task-panel">
                <div id="error"></div>
                <div id="mainActions">
                    <button id="openModalBtn">Nova Tarefa</button>
                    <button id="btnClearCompleted">Limpar Conclu√≠das</button>
                    <button id="btnSort">Ordenar A-Z</button>
                </div>

                <dialog id="taskModal">
                    <div class="modal-content">
                        <h2>Cadastrar/Editar Tarefa</h2>

                        <input type="hidden" id="editTaskId">
                        
                        <textarea id="newTask" placeholder="Descreva a tarefa..." rows="3"></textarea>
                        
                        <div class="select-group">
                            <select id="taskTypeSelect">
                                <option value="task">Tarefa Comum</option>
                                <option value="bug">Reportar Bug</option>
                            </select>

                            <select id="prioritySelect">
                                <option value="Baixa">Prioridade: Baixa</option>
                                <option value="Normal" selected>Prioridade: Normal</option>
                                <option value="Alta">Prioridade: Alta</option>
                                <option value="Cr√≠tica">Prioridade: CR√çTICA</option>
                            </select>

                            <select id="categorySelect">
                                <option value="Audi√™ncia">Audi√™ncia</option>
                                <option value="Atendimento">Atendimento</option>
                                <option value="An√°lise">An√°lise</option>
                            </select>
                            
                            <select id="subjectSelect">
                                <option value="Civil">Civil</option>
                                <option value="Trabalhista">Trabalhista</option>
                                <option value="Penal">Penal</option>
                            </select>
                        </div>

                        <div class="input-group-modal">
                            <label for="taskDeadline">Prazo de Entrega:</label>
                            <input type="date" id="taskDeadline" class="boxEnter">
                        </div>

                        <div class="input-group-modal">
                            <label for="assignSelect">Atribuir Colaboradores (Ctrl para v√°rios):</label>
                            <select id="assignSelect" multiple class="boxEnter"></select>
                        </div>

                        <div class="modal-buttons-custom">
                            <button id="btnCancelTask" type="button">Cancelar</button>
                            <button id="btnSaveTask" type="button">Salvar Tarefa</button>
                        </div>
                    </div>
                </dialog>

                <div id="tagFilterContainer">
                    <span>Filtrar por:</span>
                    <div id="tagCloud"></div>
                    <button id="btnClearFilter">Limpar Filtro</button>
                </div>

                <ul id="taskList">
                </ul>            
            </div>
        </section>
    </main>

    <section id="userDetails" class="details-overlay details-overlay-hidden">
        <div class="details-card">
            <h2>Detalhes do Utilizador</h2>
            <div id="detailsContent">
                <p><strong>Nome:</strong> <span id="detailName"></span></p>
                <p><strong>E-mail:</strong> <span id="detailEmail"></span></p>
                <p><strong>Fun√ß√£o:</strong> <span id="detailRole"></span></p>
            </div>
            <div class="details-actions">
                <button id="btnRemoveUserFromModal" class="btn-danger">Remover Utilizador</button>
                <button id="closeDetails">Fechar</button>
            </div>
        </div>
    </section>

    <dialog id="errorModal">
        <div id="errorModal-inner">
            <p id="modalMessage"></p>
            <button id="closeModal" type="button">Fechar</button>
        </div>
    </dialog>

    <dialog id="confirmModal">
        <p id="confirmMessage"></p>
        <div id="confirmModal-buttons">
            <button id="btnCancel" type="button">Cancelar</button>
            <button id="btnConfirmAction" type="button">Remover</button>
        </div>
    </dialog>

    <dialog id="systemInfoModal">
        <div class="modal-content">
            <h2>‚ÑπÔ∏è Informa√ß√µes do Sistema</h2>
            <div id="systemInfoContent" class="system-info-panel">
                <div class="info-section">
                    <h3>üì± Aplica√ß√£o</h3>
                    <p><strong>Nome:</strong> <span id="appName"></span></p>
                    <p><strong>Vers√£o:</strong> <span id="appVersion"></span></p>
                    <p><strong>Ambiente:</strong> <span id="appEnvironment"></span></p>
                </div>
                <div class="info-section">
                    <h3>üìä Estat√≠sticas Globais</h3>
                    <p><strong>Total de Entidades:</strong> <span id="totalEntities"></span></p>
                    <p><strong>Gerador de IDs:</strong> <span id="idGeneratorInfo">Ativo e Funcional</span></p>
                </div>
                <div class="info-section">
                    <h3>‚öôÔ∏è Alterar Ambiente</h3>
                    <select id="envSelect" class="boxEnter">
                        <option value="development">Development</option>
                        <option value="production">Production</option>
                        <option value="test">Test</option>
                    </select>
                    <button id="btnSetEnv" type="button">Aplicar</button>
                </div>
            </div>
            <div class="modal-buttons-custom">
                <button id="btnCloseSystemInfo" type="button">Fechar</button>
            </div>
        </div>
    </dialog>

    <dialog id="logsModal">
        <div class="modal-content modal-large">
            <h2>üìã Logs do Sistema</h2>
            <div class="logs-controls">
                <button id="btnClearLogs" type="button" class="btn-danger">üóëÔ∏è Limpar Logs</button>
                <button id="btnRefreshLogs" type="button">üîÑ Atualizar</button>
            </div>
            <div id="logsContent" class="logs-panel"></div>
            <div class="modal-buttons-custom">
                <button id="btnCloseLogs" type="button">Fechar</button>
            </div>
        </div>
    </dialog>

    <footer>
        <p>¬© 2026 | Projeto realizado por Daniel Moraes - Curso Frontend, Programa UPskill, Faculdade de Ci√™ncias da Universidade de Lisboa</p>
    </footer>    
</body>
</html>
